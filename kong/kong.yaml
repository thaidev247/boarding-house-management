_format_version: "3.0"
_transform: true

services:
  # ================= USER SERVICE =================
  - name: user-service
    url: http://user-service:3001
    routes:
      - name: user-route
        paths:
          - /register
          - /login
          - /profile
          - /users
          - /user
        strip_path: false

  # ================= TENANT SERVICE =================
  - name: tenant-service
    url: http://tenant-service:3002
    routes:
      - name: tenant-route
        paths:
          - /create-tenant
          - /tenants
          - /tenant
        strip_path: false

  # ================= ROOM SERVICE =================
  - name: room-service
    url: http://room-service:3003
    routes:
      - name: room-route
        paths:
          - /create-room
          - /rooms
          - /room
        strip_path: false

  # ================= PAYMENT SERVICE =================
  - name: payment-service
    url: http://payment-service:3004
    routes:
      - name: payment-route
        paths:
          - /create-payment
          - /payments
          - /payment
        strip_path: false

plugins:
  - name: prometheus
    config:
      bandwidth_metrics: true
      latency_metrics: true
      per_consumer: false
      status_code_metrics: true
      upstream_health_metrics: true